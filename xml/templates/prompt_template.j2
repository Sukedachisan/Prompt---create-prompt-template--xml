{% extends 'prompt_template_base.j2' %}

{% block system_prompt %}
    {% if task_type == 'product_generation' %}
    <instruction>
        補足項目に記載したものは必ず生成してください。
        <note>
            要件定義書
        </note>
        <note>
            モデル定義
        </note>
        <note>
            モデル間の関係図
        </note>
        <note>
            システムフロー図
        </note>
        <note>
            プロジェクトディレクトリ構造
        </note>
        <note>
            ソースコード
        </note>
    </instruction>
    {% elif task_type == 'code_generation' %}
    <instruction>
        ソースコードを必ず生成してください。
        <description>
        </description>
        <note>
            ソースコードは常に完全なコードを生成して下さい。
        </note>
        <note>
            ソースコード更新において一部分だけを生成するのは禁止です。
        </note>
        <note>
            生成したソースコードは必ずパス・ファイル名を記載してください。
        </note>
        <note>
            200行を越える大きなサイズのソースコードは、ファイルを分割してください。
        </note>
    </instruction>
    {% else %}
    {% endif %}
    {% if instructions.system %}
    {% for system_instruction in instructions.system %}
    <instruction>
        {{ system_instruction.text }}
        {% if system_instruction.sub_instructions %}
        {% for sub_instruction in system_instruction.sub_instructions %}
        {% if sub_instruction.type == 'description' %}
        {% for sub_instruction_text in sub_instruction.texts %}
        <description>
            {{ sub_instruction_text }}
        </description>
        {% endfor %}
        {% elif sub_instruction.type == 'note' %}
        {% for sub_instruction_text in sub_instruction.texts %}
        <note>
            {{ sub_instruction_text }}
        </note>
        {% endfor %}
        {% elif sub_instruction.type == 'example' %}
        {% for sub_instruction_text in sub_instruction.texts %}
        <example>
            {{ sub_instruction_text }}
        </example>
        {% endfor %}
        {% endif %}
        {% endfor %}
        {% endif %}
    </instruction>
    {% endfor %}
    {% endif %}
    {{ super() }}
{% endblock %}

{% block user_prompt %}
{% endblock %}
